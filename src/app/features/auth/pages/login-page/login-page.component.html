<div class="page">
  <mat-card class="login-card">
    <div class="brand">
      <h1>Cripton Prime</h1>
      <div class="sub">ERP</div>
      <div class="hint">Sign in to start your session</div>
    </div>

    <form class="form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline" class="full" subscriptSizing="dynamic">
        <mat-label>Company</mat-label>
        <mat-select formControlName="companyId">
          <mat-option *ngFor="let c of companies" [value]="c.id">{{ c.name }}</mat-option>
        </mat-select>
        <mat-icon matSuffix>apps</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full" subscriptSizing="dynamic">
        <mat-label>Office</mat-label>
        <mat-select formControlName="officeId">
          <mat-option *ngFor="let o of offices" [value]="o.id">{{ o.name }}</mat-option>
        </mat-select>
        <mat-icon matSuffix>place</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full" subscriptSizing="dynamic">
        <mat-label>Username</mat-label>
        <input matInput formControlName="username" />
        <mat-icon matSuffix>person</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full" subscriptSizing="dynamic">
        <mat-label>Password</mat-label>
        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" />
        <button mat-icon-button matSuffix type="button" (click)="togglePassword()">
          <mat-icon>{{ hidePassword ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
      </mat-form-field>

      <button mat-raised-button color="primary" class="submit" type="submit" [disabled]="form.invalid || busy">
        <span *ngIf="!busy">Sign In</span>
        <span *ngIf="busy">Signing in...</span>
      </button>

      <button type="button" class="forgot" (click)="onForgotPassword()">
        Forgot Password?
      </button>
    </form>
  </mat-card>
</div>
